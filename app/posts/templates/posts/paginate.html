{% from '_alerts_macros.j2' import alert %}
{% from '_paginate_macros.j2' import paginate %}

{% extends 'base.html' %}

{% block title %}
    Пости
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('.static', filename='css/paginate.css') }}">
{% endblock %}

{% block content %}
{{ alert('m-3')}}

<article class="articles-grid container py-3">
    <div class="card-columns">

        {% for post in pages.items %}
        <div class="card">
            {% if post.image %}
            <img class="card-img-top" src="{{ post.image }}" alt="{{ post.title }}">
            {% endif %}
            <div class="card-body">
                <h5 class="card-title">{{ post.title }}</h5>
                <p class="card-text">{{ post.subtitle }}</p>
                <a href="{{ url_for('posts_bp.post', slug=post.slug) }}" class="btn btn-outline-primary">
                    Детальніше
                    <i class="fas fa-eye"></i>
                </a>
                {% if not current_user.is_anonymous and current_user.is_author(post) %}
                <a href="{{ url_for('posts_bp.update_post', slug=post.slug) }}" class="btn btn-primary">
                    <i class="fas fa-pen"></i>
                </a>

                <a href="{{ url_for('posts_bp.delete_post', slug=post.slug) }}" class="btn btn-danger">
                    <i class="fas fa-trash"></i>
                </a>
                {% endif %}
                <p class="card-text pt-1">
                    {% for tag in post.tags %}
                        <a href="{{ url_for('posts_bp.tag_posts', slug=tag.slug) }}"
                            class="badge badge-primary">{{ tag.value }}</a>
                    {% endfor %}
                </p>
            </div>
            <div class="card-footer text-muted">
                <i class="fas fa-calendar-alt pr-1"></i>
                {{ post.date.strftime('%d.%m.%Y') }}
            </div>
        </div>
        {% endfor %}
    </div>
</article>

{{ paginate(pages, link, context) }}

{% endblock %}